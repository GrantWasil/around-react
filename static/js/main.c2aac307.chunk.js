(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),i=(a(15),a(9)),l=a(1),s=a(6),u=a.n(s);var m=function(){return r.a.createElement("header",{className:"header container"},r.a.createElement("img",{className:"logo",src:u.a,alt:"Around the US Logo"}))},p=r.a.createContext();var d=function(e){var t=r.a.useContext(p),a=e.card.owner._id===t._id?"element__delete":"element__delete_hidden",n=e.card.likes.some((function(e){return e._id===t._id}))?"element__info-like element__info-like_active":"element__info-like";return r.a.createElement("div",{className:"element"},r.a.createElement("button",{className:a,"aria-label":"Remove",type:"button",onClick:function(){e.onCardDelete(e.card)}}),r.a.createElement("img",{className:"element__image",src:e.card.link,alt:"Image of "+e.card.name,onClick:function(){e.handleCardClick(e.card)}}),r.a.createElement("div",{className:"element__info"},r.a.createElement("h2",{className:"element__info-name"},e.card.name),r.a.createElement("div",{className:"element__info-right"},r.a.createElement("button",{className:n,"aria-label":"Like",type:"button",onClick:function(){e.onCardLike(e.card)}}),r.a.createElement("p",{className:"element__info-count"},e.card.likes.length))))};var _=function(e){var t=r.a.useContext(p);return r.a.createElement(p.Provider,{value:t},r.a.createElement("main",null,r.a.createElement("section",{className:"profile container"},r.a.createElement("img",{className:"profile__avatar",alt:"The profile picture of the user",src:t.avatar,onClick:e.handleEditAvatarClick}),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__info-name"},t.name),r.a.createElement("p",{className:"profile__info-title"},t.about)),r.a.createElement("button",{className:"btn btn-edit","aria-label":"Edit",type:"button",onClick:e.handleEditProfileClick}),r.a.createElement("button",{className:"btn btn-new","aria-label":"New",type:"button",onClick:e.handleAddPlaceClick})),r.a.createElement("section",{className:"elements container"},e.cards.map((function(t,a){return r.a.createElement(d,{card:t,key:a,handleCardClick:e.handleCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})})))))};var f=function(){return r.a.createElement("footer",{className:"footer container"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Around The U.S."))};var h=function(e){return r.a.createElement("section",{className:e.isOpen?"popup_opened popup popup-".concat(e.name):"popup popup-".concat(e.name)},r.a.createElement("div",{className:"popup__overlay",onClick:e.onClose}),r.a.createElement("div",{className:"popup__container"},r.a.createElement("h3",{className:"popup__container-title"},e.title),r.a.createElement("form",{className:"popup__form",noValidate:!0,onSubmit:e.handleSubmit},e.children,r.a.createElement("button",{className:"popup__container-save",type:"submit"},"Save"),r.a.createElement("button",{className:"popup__close","aria-label":"Close",type:"reset",onClick:e.onClose}))))};var E=function(e){var t=r.a.useState(""),a=Object(l.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),i=Object(l.a)(c,2),s=i[0],u=i[1],m=r.a.useContext(p);return r.a.useEffect((function(){o(m.name),u(m.about)}),[m]),r.a.createElement(h,{name:"edit",title:"Edit Profile",isOpen:e.isOpen,onClose:e.onClose,handleSubmit:function(t){t.preventDefault(),e.onUpdateUser(n,s)}},r.a.createElement("fieldset",{className:"popup__field"},r.a.createElement("input",{className:"popup__container-name popup__input",id:"newName-input",placeholder:"Name",type:"text",name:"text",minLength:"2",maxLength:"40",required:!0,onChange:function(e){o(e.target.value)},value:n}),r.a.createElement("span",{className:"popup__input-error",id:"newName-input-error"}),r.a.createElement("input",{className:"popup__container-about popup__input",id:"newAbout-input",placeholder:"About me",type:"text",name:"about",minLength:"2",maxLength:"200",required:!0,onChange:function(e){u(e.target.value)},value:s}),r.a.createElement("span",{className:"popup__input-error",id:"newAbout-input-error"})))};var v=function(e){var t=r.a.useRef();return r.a.createElement(h,{name:"photo",title:"Change profile picture",isOpen:e.isOpen,onClose:e.onClose,handleSubmit:function(a){a.preventDefault(),e.onUpdateAvatar(t.current.value)}},r.a.createElement("input",{ref:t,className:"popup__container-about popup__input",id:"photo-input",placeholder:"Image URL",name:"link",type:"URL",required:!0}),r.a.createElement("span",{className:"popup__input-error",id:"photo-input-error"}))};var b=function(e){var t=r.a.useState(""),a=Object(l.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),i=Object(l.a)(c,2),s=i[0],u=i[1];return r.a.createElement(h,{name:"new",title:"New Place",isOpen:e.isOpen,onClose:e.onClose,handleSubmit:function(t){t.preventDefault(),e.onAddPlace(n,s)}},r.a.createElement("fieldset",{className:"popup__field"},r.a.createElement("input",{className:"popup__container-name popup__input",id:"name-input",placeholder:"Title",type:"text",name:"name",minLength:"2",maxLength:"30",required:!0,value:n,onChange:function(e){o(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error",id:"name-input-error"}),r.a.createElement("input",{className:"popup__container-about popup__input",id:"about-input",placeholder:"Image URL",name:"link",type:"URL",required:!0,value:s,onChange:function(e){u(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error",id:"about-input-error"})))};var C=function(e){return r.a.createElement(r.a.Fragment,null,e.card.link?r.a.createElement("section",{className:"picture popup_opened"},r.a.createElement("div",{className:"popup__overlay",onClick:e.onClose}),r.a.createElement("div",{className:"picture__container"},r.a.createElement("button",{className:"popup__close picture__container-close","aria-label":"Close",type:"button",onClick:e.onClose}),r.a.createElement("img",{className:"picture__container-image",src:e.card.link,alt:e.card.name}),r.a.createElement("p",{className:"picture__container-title"},e.card.name))):r.a.createElement("section",{className:"picture popup"},r.a.createElement("div",{className:"popup__overlay",onClick:e.onClose}),r.a.createElement("div",{className:"picture__container"},r.a.createElement("button",{className:"popup__close picture__container-close","aria-label":"Close",type:"button",onClick:e.onClose}),r.a.createElement("img",{className:"picture__container-image",src:e.card.link,alt:e.card.name}),r.a.createElement("p",{className:"picture__container-title"},e.card.name))))},N=a(7),k=a(8),g=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(N.a)(this,e),this._baseUrl=a,this._headers=n}return Object(k.a)(e,[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getProfileData",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"createNewCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateUserImage",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateProfileData",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=t?"PUT":"DELETE";return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:a,headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-4",headers:{authorization:"cf891b37-8c41-4e79-9006-bc8a3becbc32","Content-Type":"application/json"}});var y=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(l.a)(o,2),s=c[0],u=c[1],d=r.a.useState(!1),N=Object(l.a)(d,2),k=N[0],y=N[1],j=r.a.useState({}),O=Object(l.a)(j,2),P=O[0],S=O[1],U=r.a.useState({}),w=Object(l.a)(U,2),L=w[0],A=w[1],x=r.a.useState([]),D=Object(l.a)(x,2),T=D[0],I=D[1];function R(){n(!1),u(!1),y(!1),S({})}return r.a.useEffect((function(){Promise.all([g.getProfileData(),g.getInitialCards()]).then((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];A(a),I(n)})).catch((function(e){console.log("Error: ".concat(e))}))}),[]),r.a.createElement(p.Provider,{value:L},r.a.createElement("div",{className:"page"},r.a.createElement(m,null),r.a.createElement(_,{handleEditAvatarClick:function(){y(!0)},handleEditProfileClick:function(){n(!0)},handleAddPlaceClick:function(){u(!0)},handleCardClick:function(e){S(e)},cards:T,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===L._id}));g.changeLikeCardStatus(e._id,!t).then((function(t){var a=T.map((function(a){return a._id===e._id?t:a}));I(a)}))},onCardDelete:function(e){g.deleteCard(e._id).then((function(t){var a=T.filter((function(t){return t._id!=e._id}));I(a)}))}}),r.a.createElement(h,{name:"delete",title:"Are you sure?",onClose:R},r.a.createElement("button",{className:"popup__container-save delete__save",type:"submit"},"Yes")),r.a.createElement(b,{isOpen:s,onClose:R,onAddPlace:function(e,t){g.createNewCard(e,t).then((function(e){I([e].concat(Object(i.a)(T))),R()}))}}),r.a.createElement(v,{isOpen:k,onClose:R,onUpdateAvatar:function(e){g.updateUserImage(e).then((function(e){A(e),R()}))}}),r.a.createElement(E,{isOpen:a,onClose:R,onUpdateUser:function(e,t){g.updateProfileData(e,t).then((function(e){A(e),R()}))}}),r.a.createElement(C,{card:P,onClose:R}),r.a.createElement(f,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a.p+"static/media/logo.3e6893cd.svg"}},[[10,1,2]]]);
//# sourceMappingURL=main.c2aac307.chunk.js.map